(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ef3d453a","chunk-1d4834ff"],{"06f8":function(t,n,e){},"5c9e3":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMTEtMjBUMTM6Mzk6MjMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTExLTIwVDE0OjA4OjU5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTExLTIwVDE0OjA4OjU5KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjczYTRkZjM2LWQ1NGMtNGY0YS1hZWE3LWVmNjA2Njg3ZWUyNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3M2E0ZGYzNi1kNTRjLTRmNGEtYWVhNy1lZjYwNjY4N2VlMjciIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3M2E0ZGYzNi1kNTRjLTRmNGEtYWVhNy1lZjYwNjY4N2VlMjciPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjczYTRkZjM2LWQ1NGMtNGY0YS1hZWE3LWVmNjA2Njg3ZWUyNyIgc3RFdnQ6d2hlbj0iMjAyMy0xMS0yMFQxMzozOToyMyswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjMgKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+4uX/6gAAA81JREFUWMPNV0trE1EUPrqp1YVL/4BSW0tBUGiSmVhbTWw1ibFJX5mpVqrVCipS8YGbIoiPvyDiQiEVMpOUlraguPBVqqLUx6LtqlilCx/YgqDCeL7pDTR0ZjIJ2rr4GJJ77/ede+49j0uGYVAWY1OfadPpIXrybpbC3Rp1npqm+JlX5OkZoB1t/aWNhx9uqFEzlVJ7ulpuT/vldj24gLQf/2EMczAXa7AWHOACJ7ihsViT7AwIdafo2JlP1Hzy9brqI6lKWUkHPKoe86npmKSmowL7BczfGMMczMUarAUHuFwbsPHUEL2b/kYtp4dW1XXcL689OFjva001C5GQS0SxBmvBAS5wgtvZgMnPVHZ2hG4PT5VEjg96t7X0xT1KqlFWM6ECxE1gDdaCA1y3hyfXlPWMmBq2Box/nKOK7oH1VdG+oKdVg6vDhQpbIMxc8aoD94IVJwbXj898zzVgft4w8fX7T3rwfKa0PJwMSG1a018QzkWbHi+PJAPQgFZWly5fNujaFYNiJ0ZXexNJjy+hx/lGh/66AQxwe5WkB1rQhDb1XjLoaq9Bezsfb97afLdJzu/2PYxagZ2LgN91jAa7owM3NKAFTWhT6NorCvU8W8ux2+BTtMY84jWM3X5FOycntH5J0cb5OyEltJf8vSMreheP+xm7GBFLL7AGtKAJbdp+foCqu/RKb0uKd5+x233Ep2b8kpJuZZGHLGZYQ//B4/d4XoPPxghoQAua0Kao+qDEm9ADfO52cR42XaykD7HIjL34Avwm9CeSkqkXnli6KdaCJrRJ6Xy6oVo1Q87O7SDZw7t7m088B4reJ46jwYoXmtAmv6pvkRbSq50BPia7XpD4wnH85HVHxcW04o1Bm1BEHNJskLGPCccKN8DEXREdluka2mRWMnsD4P42vuVfijGAo+SFCFFLA6BNKKeiollNgvsOMtmvIj0w4WDAfmi7MUDhncwV6YFxFwY4HkHAdFVCe1+kB/qd7oB5BHku4V6GzJnvVjEG8LrzeS+hizBE+m1iwtkC88CjbA5xDEMXiQiZTOY26yIT/3a184Q2zfNbhfEhx0TkIhWLIpKReFcXOMF8cBbX37B4B9eOHbZ8i1Oxy2IE7BOptZnP9iaLvRXR8YvzxFf+jrKBN3i8Xtz8iE2rlluMCijHYYEaYUjUDFHOE4xENm3bFiC7clxEQ5KNjoDIE3VCNCi85NCoWjQkOS2ZIloydRlbsiVNaQRN6T8wwq4pzWnLuWVG64wWGq30srTlSx4mPXiYTK5ZkYfJyj/N/ofH6XI/z/8ANsBPG1/Dv4AAAAAASUVORK5CYII="},"608e":function(t,n,e){"use strict";e("d54a")},a0c5:function(t,n,e){"use strict";e.r(n);var r={props:{title:{type:String}},data:function(){return{turnTop:!1}},methods:{handleBtn:function(){this.turnTop=!this.turnTop}}},a=(e("608e"),e("2877")),i=Object(a.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"flexible-box"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[t._v(t._s(t.title||""))]),e("div",{staticClass:"btns"},[e("div",{staticClass:"text",on:{click:t.handleBtn}},[t._v(" "+t._s(t.turnTop?"展开":"收起")+" ")]),e("svg-icon",{class:{arrowRotate:this.turnTop},attrs:{"icon-class":"arrow"}})],1)]),e("div",{class:{content:!0,"flexible-content":this.turnTop}},[t._t("default")],2)])}),[],!1,null,"7a3dacc3",null);n.default=i.exports},a323:function(t,n,e){"use strict";e.d(n,"a",(function(){return m})),e.d(n,"b",(function(){return h})),e.d(n,"e",(function(){return g})),e.d(n,"d",(function(){return v})),e.d(n,"c",(function(){return N}));var r=e("5530"),a=e("c7eb"),i=e("1da1");function o(t,n){return c.apply(this,arguments)}function c(){return c=Object(i.a)(Object(a.a)().mark((function t(n,e){var r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new n.Geocoder,t.abrupt("return",new Promise((function(t){r.getPoint(e,(function(n){n&&t({lng:n.lng,lat:n.lat})}),"中国")})));case 2:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function u(t,n){return s.apply(this,arguments)}function s(){return s=Object(i.a)(Object(a.a)().mark((function t(n,e){var r,i,c;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},i={},!e.originLng||!e.originLat){t.next=6;break}r={lng:e.originLng,lat:e.originLat},t.next=9;break;case 6:return t.next=8,o(n,e.originLocation);case 8:r=t.sent;case 9:if(!e.destLng||!e.destLat){t.next=13;break}i={lng:e.destLng,lat:e.destLat},t.next=16;break;case 13:return t.next=15,o(n,e.destLocation);case 15:i=t.sent;case 16:return c=p(r,i),t.abrupt("return",[r,c,i]);case 18:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function l(t,n){return b.apply(this,arguments)}function b(){return b=Object(i.a)(Object(a.a)().mark((function t(n,e){var r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},!e.lng||!e.lat){t.next=6;break}r={lng:e.lng,lat:e.lat},t.next=9;break;case 6:return t.next=8,o(n,e.address);case 8:r=t.sent;case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function p(t,n){var e={lng:null,lat:null},r=Math.abs(Number(t.lng)-Number(n.lng)),a=Math.abs(Number(t.lat)-Number(n.lat)),i=Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),o=Math.floor(0*a/i*1e3)/1e3,c=Math.floor(0*r/i*1e3)/1e3;return Number(t.lat)>Number(n.lat)&&Number(t.lng)>Number(n.lng)?(e.lng=o,e.lat=-c):Number(t.lat)<Number(n.lat)&&Number(t.lng)<Number(n.lng)?(e.lng=-o,e.lat=c):Number(t.lng)>Number(n.lng)&&Number(t.lat)<Number(n.lat)?(e.lat=-c,e.lng=-o):Number(t.lat)>Number(n.lat)&&Number(t.lng)<Number(n.lng)&&(e.lat=c,e.lng=o),{lng:(Number(t.lng)+Number(n.lng))/2+e.lng,lat:(Number(t.lat)+Number(n.lat))/2+e.lat}}function m(t,n){return d.apply(this,arguments)}function d(){return d=Object(i.a)(Object(a.a)().mark((function t(n,e){var r,o,c,s,l;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.filter((function(t){return["shop","site","wharf"].indexOf(t.transportType)<0})),o=r.map(function(){var t=Object(i.a)(Object(a.a)().mark((function t(e){var r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(n,e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()),t.next=4,Promise.all(o);case 4:return c=t.sent,s=c.map((function(t){return[t[0],t[2]]})).reduce((function(t,n){return t.concat(n)}),[]),l=c.map((function(t,n){var e;return e=Number(t[0].lng)>Number(t[2].lng)?"-L":"-R",{point:t[1],icon:r[n].transportType+e}})),t.abrupt("return",{pointsWithControl2Arr:c.map((function(t,n){return{points:[t[0],t[2]],transportType:e[n].transportType}})),controlPontList:l,pointsWithControl:c.reduce((function(t,n){return t.concat(n)}),[]),points:s});case 8:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function h(t,n){return f.apply(this,arguments)}function f(){return f=Object(i.a)(Object(a.a)().mark((function t(n,e){var i,o;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.map((function(t){return l(n,t)})),t.next=3,Promise.all(i);case 3:return o=t.sent,t.abrupt("return",o.map((function(t,n){return{icon:e[n].transportType,point:Object(r.a)({},t)}})));case 5:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function g(t,n){var e=Math.abs(Number(t.lng)-Number(n.lng)),r=Math.abs(Number(t.lat)-Number(n.lat)),a=Math.sqrt(Math.pow(e,2)+Math.pow(r,2));return a<2?8:a<3?7:a<12?6:a<18?5:3}function v(t,n){var e=Math.abs(Number(t.lng)-Number(n.lng)),r=Math.abs(Number(t.lat)-Number(n.lat));return Math.sqrt(Math.pow(e,2)+Math.pow(r,2))<2?2:5}function N(t){if(t&&t[0]&&t[0].lng&&t[0].lat){var n=t[0].lng,e=t[0].lng,r=t[0].lat,a=t[0].lat;return t.forEach((function(t){n=Math.max(Number(t.lng),Number(n)),e=Math.min(Number(t.lng),Number(e)),r=Math.max(Number(t.lat),Number(r)),a=Math.min(Number(t.lat),Number(a))})),v({lat:r,lng:n},{lat:a,lng:e})}}e("99af"),e("4de4"),e("d81d"),e("13d5"),e("a9e3"),e("d3b7"),e("3ca3"),e("159b"),e("ddb0")},abb1:function(t,n,e){"use strict";e.r(n);var r,a=e("c7eb"),i=e("1da1"),o=(e("a630"),e("d81d"),e("d3b7"),e("3ca3"),e("498a"),e("159b"),e("bd0c")),c=e("a0c5"),u=e("0605"),s=e("c0e9"),l=e.n(s),b=e("a01c"),p=e("a323"),m=(e("d8ad"),e("ed08"),{name:"BaseMapPosition",components:{BmlCurveLine:o.BmlCurveLine,flexibleContainer:c.default,roadTransport:u.default,Bmldriving:o.Bmldriving},props:{imgSize:{type:String,default:"small"}},computed:{addressList:function(){return this.$store.getters.getMapAddressList},singlePoint:function(){return this.$store.getters.getSinglePoint}},watch:{addressList:{handler:function(){var t=Object(i.a)(Object(a.a)().mark((function t(n){var e,i,o,c;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=16;break}return t.next=3,Object(p.a)(r,n);case 3:e=t.sent,i=e.controlPontList,o=e.pointsWithControl,c=e.points,this.pointsWithControl=o,this.controlPoint=i,this.points=c,this.start=this.pointsWithControl[0],this.end=this.pointsWithControl[2],this.zoom=Object(p.e)(o[0],o[1]),this.center={lng:this.controlPoint[0].point.lng+Object(p.d)(o[0],o[1]),lat:this.controlPoint[0].point.lat};case 16:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},singlePoint:{handler:function(){var t=Object(i.a)(Object(a.a)().mark((function t(n){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.b)(r,n);case 2:this.singlePoints=t.sent;case 4:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()}},data:function(){return{start:null,end:null,active:!1,zoom:6,center:"南京",address:{destlocation:"",originlocation:""},pointsWithControl:[],points:[],controlPoint:[],singlePoints:[]}},created:function(){},mounted:function(){},beforeDestroy:function(){this.$store.commit("INIT_ADDRESS_LIST")},methods:{svgToCanvas:function(t){return Array.from(t.getElementsByTagName("svg")).forEach(function(){var t=Object(i.a)(Object(a.a)().mark((function t(n){var e,r,i,o,c,u,s;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.parentNode,(r=document.createElement("canvas")).style.zIndex="0","svg"!==n.tagName){t.next=14;break}return i=n.querySelector("path").outerHTML.trim(),o=n.getBoundingClientRect(),c=o.width,u=o.height,r.width=c,r.height=u,s=r.getContext("2d"),t.next=11,b.a.from(s,i);case 11:t.sent.start(),n.style.position&&(r.style.position=999);case 14:e.appendChild(r),e.removeChild(n);case 16:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()),t},saveImage:function(){var t=this;return new Promise((function(n){var e=document.getElementById("bm-view");t.svgToCanvas(e),setTimeout((function(){l()(e,{useCORS:!0,onclone:function(){}}).then(function(){var e=Object(i.a)(Object(a.a)().mark((function e(r){var i,o,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=432,o=242,"big"===t.imgSize&&(i=864,o=484),e.next=5,t.resizedataURL(r.toDataURL("image/png"),i,o);case 5:c=e.sent,n({src:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),0)}))},resizedataURL:function(t,n,e){return new Promise(function(){var r=Object(i.a)(Object(a.a)().mark((function r(i,o){var c;return Object(a.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(c=document.createElement("img")).onload=function(){var t=document.createElement("canvas"),r=t.getContext("2d");t.width=n,t.height=e,r.drawImage(this,0,0,n,e);var a=t.toDataURL();i(a)},c.src=t;case 3:case"end":return r.stop()}}),r)})));return function(t,n){return r.apply(this,arguments)}}())},init:function(t){var n=t.BMap,e=t.map;r=n,this.map=e;var a=new n.Point(117.325,27.51);e.centerAndZoom(a,6),e.setCurrentCity("北京"),this.$emit("ready",{BMapGL:r,map:e})},getCityByLng:function(t){var n=t.lng,e=t.lat;return new Promise((function(t){(new r.Geocoder).getLocation(new r.Point(n,e),(function(n){t(n)}))}))}}}),d=m,h=(e("bb51"),e("2877")),f=Object(h.a)(d,(function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"map-wrap"},[r("baidu-map",{staticClass:"bm-view",attrs:{id:"bm-view",center:t.center,zoom:t.zoom,"scroll-wheel-zoom":!0},on:{ready:t.init}},[r("bm-driving",{attrs:{start:t.start,end:t.end,"auto-viewport":!1,policy:"BMAP_DRIVING_POLICY_LEAST_DISTANCE",panel:!1,location:"北京"}}),t._l(t.points,(function(t,n){return r("bm-marker",{key:n,attrs:{position:t,dragging:!0,icon:{url:e("5c9e3"),size:{width:32,height:32}}}})}))],2)],1)}),[],!1,null,"5264f0b1",null);n.default=f.exports},bb51:function(t,n,e){"use strict";e("06f8")},d54a:function(t,n,e){}}]);